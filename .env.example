# =============================================================================
# SALES PORTAL - ENVIRONMENT CONFIGURATION
# =============================================================================
#
# This file documents ALL environment variables used by the application.
#
# IMPORTANT: Understanding where to set variables
# ───────────────────────────────────────────────
#
#   LOCAL DEV (.env file)     → Copy this file to .env, set values below
#   GITHUB SECRETS/VARIABLES  → For CI/CD deployment (see infra/README.md)
#   AZURE APP SERVICE         → Set AUTOMATICALLY by Bicep (don't set manually!)
#
# For Azure deployments, the Bicep templates convert GitHub variables to the
# correct NUXT_* format. You only need this .env file for local development.
#
# =============================================================================


# =============================================================================
# LOCAL DEVELOPMENT CONFIGURATION
# =============================================================================
# These variables are for running the app locally with `pnpm dev`.
# Nuxt automatically reads .env files in development mode.
# =============================================================================

# -----------------------------------------------------------------------------
# Core Settings
# -----------------------------------------------------------------------------

NODE_ENV=development

# Auto-create tenant configurations for unknown hostnames
# Set to 'true' for easier local development
NUXT_AUTO_CREATE_TENANT=true

# -----------------------------------------------------------------------------
# Geins API Configuration
# -----------------------------------------------------------------------------
# These configure how the app connects to the Geins backend.
#
# Local:  Set in .env (using NUXT_ prefix)
# Azure:  Set GEINS_API_ENDPOINT in GitHub Variables → Bicep converts to NUXT_*

NUXT_GEINS_API_ENDPOINT=https://merchantapi.geins.io/graphql
NUXT_GEINS_TENANT_API_URL=
NUXT_GEINS_TENANT_API_KEY=

# -----------------------------------------------------------------------------
# Storage Configuration
# -----------------------------------------------------------------------------
# Controls how tenant configurations and cache are stored.
#
# Options:
#   memory  → In-memory (default, data lost on restart)
#   fs      → Filesystem (persists locally)
#   redis   → Redis/Upstash (for production)
#
# Local:  Set in .env
# Azure:  Set STORAGE_DRIVER and REDIS_URL in GitHub → Bicep converts to NUXT_*

NUXT_STORAGE_DRIVER=memory
NUXT_STORAGE_REDIS_URL=

# -----------------------------------------------------------------------------
# Health Check
# -----------------------------------------------------------------------------
# Secret key to access detailed health metrics at /api/health?key=YOUR_SECRET
# Without this, only basic status is returned (safe for public health probes).
#
# Generate a secure random string: openssl rand -hex 32

NUXT_HEALTH_CHECK_SECRET=dev-secret-change-in-production

# -----------------------------------------------------------------------------
# Sentry Error Tracking (Server-Side)
# -----------------------------------------------------------------------------
# DSN is server-only by default for security hardening.
# Get DSN from: Sentry → Project Settings → Client Keys (DSN)
NUXT_SENTRY_DSN=

# -----------------------------------------------------------------------------
# Public Configuration (Exposed to Browser)
# -----------------------------------------------------------------------------
# These are available client-side via useRuntimeConfig().public

# Feature flags
NUXT_PUBLIC_FEATURES_ANALYTICS=false

# API settings (usually don't need to change)
NUXT_PUBLIC_API_BASE_URL=/api
NUXT_PUBLIC_API_TIMEOUT=30000

# Optional: Client-side Sentry error tracking
# Set this if you want browser error reporting (exposes DSN to clients)
# NUXT_PUBLIC_SENTRY_DSN=

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Log verbosity: debug, info, warn, error, silent
# Set to 'silent' to disable all server-side logging

LOG_LEVEL=debug


# =============================================================================
# BUILD-TIME ONLY (GitHub Secrets)
# =============================================================================
# These are ONLY used during `docker build` or CI/CD.
# They are NOT needed at runtime and should NOT be set in Azure.
# Set these in GitHub Repository Secrets for source map uploads.
# =============================================================================

# Sentry source map upload configuration
# Only needed if you want source maps in Sentry for better stack traces
SENTRY_ORG=
SENTRY_PROJECT=
SENTRY_AUTH_TOKEN=


# =============================================================================
# AZURE-ONLY (Set Automatically - DO NOT USE LOCALLY)
# =============================================================================
# These are set by Azure/Bicep and should not be in your .env file.
# Listed here for documentation purposes only.
# =============================================================================

# NITRO_HOST=0.0.0.0                              # Required for Azure container
# NITRO_PORT=3000                                 # Container port
# WEBSITES_PORT=3000                              # Azure App Service port mapping
# APPLICATIONINSIGHTS_CONNECTION_STRING=...       # Azure Monitor (auto-injected)
# APPINSIGHTS_INSTRUMENTATIONKEY=...              # Azure Monitor (auto-injected)


# =============================================================================
# QUICK REFERENCE: Variable Name Mapping
# =============================================================================
#
# Your .env / Azure         →  nuxt.config.ts runtimeConfig
# ─────────────────────────────────────────────────────────
# NUXT_AUTO_CREATE_TENANT   →  autoCreateTenant
# NUXT_GEINS_API_ENDPOINT   →  geins.apiEndpoint
# NUXT_GEINS_TENANT_API_URL →  geins.tenantApiUrl
# NUXT_GEINS_TENANT_API_KEY →  geins.tenantApiKey
# NUXT_STORAGE_DRIVER       →  storage.driver
# NUXT_STORAGE_REDIS_URL    →  storage.redisUrl
# NUXT_HEALTH_CHECK_SECRET  →  healthCheckSecret
# NUXT_PUBLIC_*             →  public.*
#
# =============================================================================
